/*! Single page application framework - v0.1.3 - 2016-04-16
* https://github.com/dzhdmitry/spa
* Copyright (c) 2016 Dmitry Dzhuleba;
* Licensed MIT
*/
!function(a,b){"function"==typeof define&&define.amd?define(["jquery","underscore","backbone"],b):a.SPA=b(a.$,a._,a.Backbone)}(this,function(a,b,c){var d={};return a?b?c?(d.View=c.View.extend({tagName:"div",initialize:function(){this.listenTo(this.model,"change",this.render)},template:function(a){return""},render:function(){var a=this.template(this.model.toJSON());return this.$el.html(a),this.toggle(this.model.get("active")),this},toggle:function(a){var b=a?"block":"none";this.$el.css("display",b)}}),d.Model=c.Model.extend({defaults:{name:"",active:!0,title:""},show:function(){this.set("active",!0),a("title").html(this.get("title"))},hide:function(){this.set("active",!1)}}),d.Collection=c.Collection.extend({model:d.Model,view:d.View,open:function(a){this.each(function(b){b.id==a?b.show():b.hide()})}}),d.Router=c.Router.extend({collection:d.Collection,initialize:function(e){var f=this,g={el:a("body"),start:!0,pushState:!1,root:"/"},h=b.extend({},g,e);this.pushState=h.pushState,this.root=h.root,this.pages=new this.collection,this.listenTo(this.pages,"add",function(a){var b=new f.pages.view({model:a});h.el.append(b.render().el)}),h.start&&c.history.start({pushState:h.pushState,root:h.root}),d.Router.__super__.initialize.call(this,e)},start:function(){c.history.start({pushState:this.pushState,root:this.root})},go:function(a){var d=this.pushState?c.history.getPath():c.history.getHash(),e=b.extend({id:d},a);this.pages.add(e),this.pages.open(e.id)}}),d):void console.error("Backbone is required by SPA"):void console.error("Underscore is required by SPA"):void console.error("jQuery is required by SPA")});